

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>High-level parameters &mdash; ch_frb_l1  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Buffer sizes" href="buffer_sizes.html" />
    <link rel="prev" title="Config reference: L1 server" href="index.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> ch_frb_l1
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../help_my_pipeline_is_broken.html">Help! My pipeline is broken</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../offline_analysis_todo.html">Offline Analysis TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../example_offline_analysis_scripts/index.html">Example Offline Analysis Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drao/index.html">DRAO computing environment</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">The Real-Time L1 Server</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../high_level_overview.html">High-level overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quick_start_examples.html">Quick-start examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration_file_overview.html">Configuration file overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../l1_streams.html">L1 streams</a></li>
<li class="toctree-l2"><a class="reference internal" href="../two_node_examples.html">Two-node examples (OUT OF DATE)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Config reference: L1 server</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">High-level parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="buffer_sizes.html">Buffer sizes</a></li>
<li class="toctree-l3"><a class="reference internal" href="file_writing.html">File-writing parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="l1b_linkage.html">L1B linkage</a></li>
<li class="toctree-l3"><a class="reference internal" href="misc.html">Misc parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../l0_config_reference.html">Config reference: L0 simulator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rpc_reference.html">RPC reference</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ch_frb_l1</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">The Real-Time L1 Server</a> &raquo;</li>
        
          <li><a href="index.html">Config reference: L1 server</a> &raquo;</li>
        
      <li>High-level parameters</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="high-level-parameters">
<h1>High-level parameters<a class="headerlink" href="#high-level-parameters" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal"><span class="pre">nbeams</span></code> (integer).</p>
<p>Number of beams processed by the node.
If the L0 simulator is also being used, then the value of ‘nbeams’ in its config file must match.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">nfreq</span></code> (integer).</p>
<p>Number of frequency channels (usually 1024 in subscale testing, or 16384 in production-scale).
If the L0 simulator is also being used, then the value of ‘nfreq’ in its config file must match.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">nt_per_packet</span></code> (integer).</p>
<p>Number of time samples sent in each UDP packet.
If the L0 simulator is also being used, then the value of ‘nt_per_packet’ in its config file must match.</p>
<p>There is currently a restriction that in order to use fast kernels,
nt_per_packet must be 16.  In particular, you should take nt_per_packet=16 in production-scale
runs, where fast kernels are usually a necessity.  If you’re using slow kernels,
then the value of nt_per_packet is probably not very important.  (For more discussion
of slow-vs-fast kernels, see ‘slow_kernels’ below.)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">fpga_counts_per_sample</span></code> (integer, default 384).</p>
<p>Number of FPGA counts per time sample.
If the L0 simulator is also being used, then the value of ‘fpga_counts_per_sample’ in its config file must match.</p>
<p>This is an indirect way of specifiying the sampling rate.  One FPGA count corresponds to
2.5 microseconds (hardcoded).  Therefore, the default value fpga_counts_per_sample=384
corresponds to a sampling rate of 0.983 milliseconds.</p>
<p>One use for this parameter is to artificially speed up or slow down test instances.
For example, to run a “stress test” in which the L1 server is required to run 10%
faster than normal, you can take fpga_counts_per_sample=349.  (Note that you’ll also
need to decrease the value of ‘dt_sample’ in the bonsai config file by 10%, and the
max DM of the search will automatically decrease by 10%.)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">ipaddr</span></code> (either a string, or a list of strings).</p>
<p>One or more IP addresses, for the L1 server’s stream(s).  This can be either a list
of strings (one for each stream), or a single string (if all streams use the same
IP address).  IP addresses are specified as strings, e.g. <code class="docutils literal"><span class="pre">&quot;127.0.0.1&quot;</span></code> or <code class="docutils literal"><span class="pre">&quot;eno1&quot;</span></code>.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">port</span></code> (either an integer, or a list of integers).</p>
<p>One or more UDP ports, for the L1 server’s stream(s).  This can be either a list
of UDP ports (one for each stream), or a single UDP port (if all streams use the same
port).</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">rpc_address</span></code> (list of strings).</p>
<p>The RPC server address for each stream, specified as a string in “zeromq” format
(e.g. <code class="docutils literal"><span class="pre">&quot;tcp://127.0.0.1:5555&quot;</span></code> or <code class="docutils literal"><span class="pre">&quot;tcp://eno1:5555&quot;</span></code>).  The ‘rpc_address’ field must be a list whose length
is equal to the number of streams on the L1 node, that is, the number of distinct
(ipaddr, udp_port) pairs.</p>
<p>The RPC address of each stream must be different (by specifying either a different IP
address or TCP port for each stream).</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">prometheus_address</span></code> (list of strings)</p>
<p>The L1 server also defines one prometheus server per beam.  The syntax is the same
as the rpc_address keyword above.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">logger_address</span></code> (string, optional)</p>
<p>The IP address of the L1 logging server, specified as a string in “zeromq” format
(e.g. <code class="docutils literal"><span class="pre">&quot;tcp://10.6.213.19:5555&quot;</span></code>).  If unspecified or the empty string, then
distributed logging will be disabled.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">nrfifreq</span></code> (integer)</p>
<p>If nonzero, then data files written to disk by the L1 server will contain the RFI mask,
with the specified number of frequency channels.  Note that the RFI JSON file must contain
a matching mask_counter transform with the appropriate frequency resolution.  If zero,
then data files written by the server will not contain the RFI mask.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">frame0_url</span></code> (string)</p>
<p>If a nonempty string, then the L1 server will determine the FPGA start time
by “curl”-ing the specified URL.  This is necessary in order to convert FPGA
counts to absolute times.  The FPGA start time will be written into the
data files written to disk by the L1 server.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">frame0_timeout_ms</span></code> (integer, default 3000)</p>
<p>Timeout for frame0_url curl requests, in milliseconds.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">beam_ids</span></code> (list of integers, optional).</p>
<p>If specified, this is a list of beam_ids which will be processed on the node.  (The
low-level UDP packet format defines a 32-bit integer beam_id).  The length of the
list must be ‘nbeams’.</p>
<p>If unspecified, beam_ids defaults to <code class="docutils literal"><span class="pre">[</span> <span class="pre">0,</span> <span class="pre">...,</span> <span class="pre">nbeams-1</span> <span class="pre">]</span></code>.</p>
<p>Note that in a setup with multiple L1 nodes, we would currently need a separate config
file for each node, because the beam IDs would be different!  This will be fixed soon,
by defining config file syntax which allows the beam IDs to be derived from the L1 node’s
IP address.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">intensity_prescale</span></code> (floating-point, optional)</p>
<p>If ‘intensity_prescale’ is specified, then all intensity values will be multiplied by its value.
This is a workaround for 16-bit overflow issues in bonsai.  When data is saved to disk, the
prescaling will not be applied.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">slow_kernels</span></code> (boolean, default=false).</p>
<p>By default (slow_kernels=false), the L1 server uses fast assembly-language kernels
for packet-level operations such as decoding and buffer assembly.  However, there
is currently a restriction: to use fast kernels, ‘nt_per_packet’ must be equal to 16,
and ‘nfreq’ must be divisible by 2048.  If these conditions are not satisfied, you’ll need
to use slow_kernels=true.</p>
<p>When running the L1 server at production-scale (~16 beams, ~16384 frequencies),
you’ll probably need to set slow_kernels=false, since the slow reference kernels
may be too slow to keep up with the data.</p>
</li>
</ul>
</div></blockquote>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="buffer_sizes.html" class="btn btn-neutral float-right" title="Buffer sizes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Config reference: L1 server" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>